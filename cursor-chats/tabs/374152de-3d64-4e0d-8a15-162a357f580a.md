# ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ìˆ˜ì • ìš”êµ¬ì‚¬í•­ ì •ë¦¬

**Last Conversation**: 2024/11/20 09:37:36

[Back to Index](../index.md)

<!-- Bubble ID: 04afc621-2494-481b-93d8-17d106c7232c -->
**ğŸ‘¤ User**

@utils.ts @types.ts 
íƒ€ì… íŒŒì¼ì„ ë°”íƒ•ìœ¼ë¡œ ì•„ë˜ ìš”êµ¬ì‚¬í•­ë“¤ì„ ì§€ì¼œì„œ utils ë‚´ ë§ˆí¬ë‹¤ìš´ ì‘ì„± í•¨ìˆ˜ë“¤ì„ ë‹¤ì‹œ ì‘ì„±í•´ì¤˜.

1. ë§ˆí¬ë‹¤ìš´ ì œëª©ì€ Cursor Chats ë¡œ ë³€ê²½í•´ì¤˜.
2. const markdownPath = path.join(workspaceFolders[0].uri.fsPath, 'cursor-chat.md'); ê²½ë¡œì— ì´ë¯¸ íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ìˆë‹¤ë©´ í•´ë‹¹ ë¬¸ì„œë¥¼ ì—…ë°ì´íŠ¸, ì—†ë‹¤ë©´ ìƒˆë¡œ ìƒì„±í•˜ë„ë¡ ìˆ˜ì •í•´ì¤˜.
3. ì„œë¡œ ë‹¤ë¥¸ Tabë“¤ë§Œ --- ë¡œ êµ¬ë¶„í•´ì¤˜.
4. Bubble ì‚¬ì´ì—ëŠ” new line ë§Œ ë„£ì–´ì¤˜ë„ ì¶©ë¶„í•  ê²ƒ ê°™ì•„.
5. Bubble ì˜ file/folder selection ë“¤ì€ ë‹¨ìˆœíˆ pathnameë§Œ ì‚¬ìš©í•´ì£¼ë©´ ë  ê²ƒ ê°™ê³ , selectionì˜ ê²½ìš° toggleì„ ì‚¬ìš©í•´ì„œ textëŠ” ê·¸ ì•ˆì— ìˆë„ë¡ êµ¬ì„±í•´ì¤˜.

**Code / File / Folder**

File /src/utils.ts

File /src/types.ts



<!-- Bubble ID: 0ad77f8d-44d8-40c2-a52c-354758f9f0d8 -->
**ğŸ¤– AI (claude-3.5-sonnet)**

ë„¤, ìš”êµ¬ì‚¬í•­ì— ë§ì¶° ë§ˆí¬ë‹¤ìš´ ê´€ë ¨ í•¨ìˆ˜ë“¤ì„ ìˆ˜ì •í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

```typescript:src/utils.ts
// bubbleToMarkdown í•¨ìˆ˜ ìˆ˜ì •
function bubbleToMarkdown(bubble: Bubble): string {
  const parts: string[] = [];
  parts.push(`<!-- Bubble ID: ${bubble.id} -->`);
  const author = bubble.type === 'user' ? 'ğŸ‘¤ User' : 'ğŸ¤– AI';
  parts.push(`**${author}**`);

  if (bubble.text) {
    parts.push(bubble.text);
  }

  // ì„ íƒëœ í…ìŠ¤íŠ¸ê°€ ìˆëŠ” ê²½ìš°
  if (bubble.selections.length > 0) {
    parts.push('<details><summary>ì„ íƒëœ í…ìŠ¤íŠ¸</summary>\n');
    bubble.selections.forEach(selection => {
      parts.push(selection.text);
    });
    parts.push('</details>');
  }

  // íŒŒì¼ ì„ íƒì´ ìˆëŠ” ê²½ìš°
  if (bubble.fileSelections.length > 0) {
    parts.push('<details><summary>ì„ íƒëœ íŒŒì¼</summary>\n');
    bubble.fileSelections.forEach(file => {
      parts.push(file.uri.path);
    });
    parts.push('</details>');
  }

  // í´ë” ì„ íƒì´ ìˆëŠ” ê²½ìš°
  if (bubble.folderSelections.length > 0) {
    parts.push('<details><summary>ì„ íƒëœ í´ë”</summary>\n');
    bubble.folderSelections.forEach(folder => {
      parts.push(folder.uri.path);
    });
    parts.push('</details>');
  }

  if (bubble.type === 'ai' && bubble.modelType) {
    parts.push(`**Model**: ${bubble.modelType}`);
  }

  return parts.join('\n');
}

// tabToMarkdown í•¨ìˆ˜ ìˆ˜ì •
function tabToMarkdown(tab: Tab, existingBubbles: Set<string> = new Set()): string {
  const parts: string[] = [];
  parts.push(`<!-- Tab ID: ${tab.tabId} -->`);
  
  const title = tab.chatTitle || 'Untitled Chat';
  parts.push(`## ${title}`);
  parts.push(`**ìƒíƒœ**: ${tab.tabState}`);
  if (tab.lastSendTime) {
    parts.push(`**ë§ˆì§€ë§‰ í™œë™**: ${new Date(tab.lastSendTime).toISOString()}\n`);
  }

  tab.bubbles.forEach(bubble => {
    if (!existingBubbles.has(bubble.id)) {
      parts.push(bubbleToMarkdown(bubble));
      parts.push(''); // ë²„ë¸” ì‚¬ì´ì— ë¹ˆ ì¤„ ì¶”ê°€
    }
  });

  return parts.join('\n');
}

// updateCursorChatMarkdown í•¨ìˆ˜ ìˆ˜ì •
export async function updateCursorChatMarkdown(data: ChatData): Promise<void> {
  const workspaceFolders = vscode.workspace.workspaceFolders;
  if (!workspaceFolders) {
    throw new Error('ì‘ì—… ê³µê°„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
  }
  
  const markdownPath = path.join(workspaceFolders[0].uri.fsPath, 'cursor-chat.md');
  let existingContent = '';
  let parsedContent: ParsedContent = { tabs: new Map() };

  // íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
  try {
    const fileExists = await fs.access(markdownPath)
      .then(() => true)
      .catch(() => false);

    if (fileExists) {
      existingContent = await fs.readFile(markdownPath, 'utf-8');
      parsedContent = parseExistingMarkdown(existingContent);
    }
  } catch (error) {
    // íŒŒì¼ì´ ì—†ëŠ” ê²½ìš° ìƒˆë¡œìš´ ë‚´ìš©ìœ¼ë¡œ ì‹œì‘
    existingContent = '# Cursor Chats\n\n';
  }

  const newContent: string[] = [existingContent.trimStart()];

  // ê° íƒ­ì˜ ë‚´ìš© ì¶”ê°€
  data.tabs.forEach((tab, index) => {
    const existingTab = parsedContent.tabs.get(tab.tabId);
    
    if (existingTab) {
      // ìƒˆë¡œìš´ ë²„ë¸”ë§Œ ì¶”ê°€
      const newBubbles = tab.bubbles.filter(bubble => !existingTab.bubbles.has(bubble.id));
      if (newBubbles.length > 0) {
        const bubbleContent = newBubbles.map(bubble => bubbleToMarkdown(bubble)).join('\n\n');
        if (bubbleContent) {
          newContent.push(bubbleContent);
        }
      }
    } else {
      // ìƒˆë¡œìš´ íƒ­ ì¶”ê°€
      if (index > 0) {
        newContent.push('\n---\n');
      }
      newContent.push(tabToMarkdown(tab));
    }
  });

  await fs.writeFile(markdownPath, newContent.join('\n'));
}
```

ì£¼ìš” ë³€ê²½ì‚¬í•­:
1. ë§ˆí¬ë‹¤ìš´ ì œëª©ì„ "Cursor Chats"ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
2. íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ë¥¼ `fs.access()`ë¥¼ ì‚¬ìš©í•˜ì—¬ í™•ì¸í•˜ë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
3. íƒ­ êµ¬ë¶„ì„ ìœ„í•œ `---` êµ¬ë¶„ì„ ì€ ìƒˆë¡œìš´ íƒ­ì´ ì¶”ê°€ë  ë•Œë§Œ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
4. ë²„ë¸” ì‚¬ì´ëŠ” ë‹¨ìˆœ ê°œí–‰ìœ¼ë¡œ êµ¬ë¶„í•˜ë„ë¡ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
5. ì„ íƒëœ í…ìŠ¤íŠ¸, íŒŒì¼, í´ë”ëŠ” `<details>` íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ í† ê¸€ ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.



<!-- Bubble ID: 6e6f99f0-d3ca-4d50-bbdc-a76deb4d6482 -->
**ğŸ‘¤ User**

date í˜•ì‹ì€ ë³´ì—¬ì¤„ ë•Œ osì˜ timezoneì— ë§ì¶°ì„œ yyyy/MM/DD HH:mm ìœ¼ë¡œ ì‘ì„±í•´ì¤˜



<!-- Bubble ID: 37309cb3-7290-4941-97a2-fbd84cc5174d -->
**ğŸ¤– AI (claude-3.5-sonnet)**

ë„¤, ë‚ ì§œ í˜•ì‹ì„ ì§€ì—­í™”í•˜ì—¬ í‘œì‹œí•˜ë„ë¡ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤.

```typescript:src/utils.ts
// ë‚ ì§œ í¬ë§·íŒ…ì„ ìœ„í•œ í•¨ìˆ˜ ì¶”ê°€
function formatDate(date: Date): string {
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, '0');
  const day = String(date.getDate()).padStart(2, '0');
  const hours = String(date.getHours()).padStart(2, '0');
  const minutes = String(date.getMinutes()).padStart(2, '0');
  
  return `${year}/${month}/${day} ${hours}:${minutes}`;
}

// tabToMarkdown í•¨ìˆ˜ ìˆ˜ì •
function tabToMarkdown(tab: Tab, existingBubbles: Set<string> = new Set()): string {
  const parts: string[] = [];
  parts.push(`<!-- Tab ID: ${tab.tabId} -->`);
  
  const title = tab.chatTitle || 'Untitled Chat';
  parts.push(`## ${title}`);
  parts.push(`**ìƒíƒœ**: ${tab.tabState}`);
  if (tab.lastSendTime) {
    // íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ Date ê°ì²´ë¡œ ë³€í™˜í•˜ê³  ë¡œì»¬ ì‹œê°„ìœ¼ë¡œ í¬ë§·íŒ…
    const date = new Date(tab.lastSendTime);
    parts.push(`**ë§ˆì§€ë§‰ í™œë™**: ${formatDate(date)}\n`);
  }

  // ... ë‚˜ë¨¸ì§€ ì½”ë“œëŠ” ë™ì¼ ...
}
```

`formatDate` í•¨ìˆ˜ë¥¼ ì¶”ê°€í•˜ê³  `tabToMarkdown` í•¨ìˆ˜ì—ì„œ ë‚ ì§œ í‘œì‹œ ë¶€ë¶„ì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. ì´ì œ ë‚ ì§œê°€ ì‹œìŠ¤í…œì˜ ë¡œì»¬ ì‹œê°„ëŒ€ì— ë§ì¶° "YYYY/MM/DD HH:mm" í˜•ì‹ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.



<!-- Bubble ID: 780b43db-4dec-49ca-bdf5-49fadb059c0d -->
**ğŸ‘¤ User**

updateCursorChatMarkdown í•¨ìˆ˜ì—ì„œ if (existingTab) ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ë¶€ë¶„ì„ ì±„ì›Œì¤˜.
ì´ë¯¸ ì¡´ì¬í•˜ëŠ” tabì´ë©´ ìƒˆë¡œ ì¶”ê°€ëœ bubbleì— ëŒ€í•´ì„œë§Œ markdownì„ ìƒì„±í•˜ê³  ì´ë¯¸ ì¡´ì¬í•˜ë˜ bubbleë“¤ì€ parsing í•œ ê±¸ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ì–´.
ìƒˆë¡œ ì¶”ê°€ëœ tabì´ë©´ ì „ì²´ bubbleì— ëŒ€í•´ì„œ markdownì„ ìƒì„±í•˜ë©´ ë¼



<!-- Bubble ID: 2180118b-9b6e-4d8c-940d-2d6215dac593 -->
**ğŸ¤– AI (claude-3.5-sonnet)**



ë„¤, ì´í•´í–ˆìŠµë‹ˆë‹¤. `updateCursorChatMarkdown` í•¨ìˆ˜ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤.

```typescript:src/utils.ts
export async function updateCursorChatMarkdown(data: ChatData): Promise<void> {
  const workspaceFolders = vscode.workspace.workspaceFolders;
  if (!workspaceFolders) {
    throw new Error('ì‘ì—… ê³µê°„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
  }
  
  const markdownPath = path.join(workspaceFolders[0].uri.fsPath, 'cursor-chat.md');
  let existingContent = '';
  let parsedContent: ParsedContent = { tabs: new Map() };

  // íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
  try {
    const fileExists = await fs.access(markdownPath)
      .then(() => true)
      .catch(() => false);

    if (fileExists) {
      existingContent = await fs.readFile(markdownPath, 'utf-8');
      parsedContent = parseExistingMarkdown(existingContent);
    }
  } catch (error) {
    existingContent = '# Cursor Chats\n\n';
  }

  const newContent: string[] = ['# Cursor Chats\n'];

  // ê° íƒ­ì˜ ë‚´ìš© ì¶”ê°€
  data.tabs.forEach((tab, index) => {
    const existingTab = parsedContent.tabs.get(tab.tabId);
    
    if (existingTab) {
      // ê¸°ì¡´ íƒ­ì´ ìˆëŠ” ê²½ìš°
      if (index > 0) {
        newContent.push('\n---\n');
      }
      
      // íƒ­ í—¤ë” ì •ë³´ ì¶”ê°€
      newContent.push(`<!-- Tab ID: ${tab.tabId} -->`);
      newContent.push(`## ${tab.chatTitle || 'Untitled Chat'}`);
      newContent.push(`**ìƒíƒœ**: ${tab.tabState}`);
      if (tab.lastSendTime) {
        newContent.push(`**ë§ˆì§€ë§‰ í™œë™**: ${formatDate(new Date(tab.lastSendTime))}\n`);
      }

      // ê¸°ì¡´ ë²„ë¸”ë“¤ì˜ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©
      const existingContent = existingTab.content.split('\n');
      const existingBubbleContent = existingContent
        .slice(existingContent.indexOf('<!-- Bubble ID:'))
        .join('\n');
      newContent.push(existingBubbleContent);

      // ìƒˆë¡œìš´ ë²„ë¸”ë§Œ ì¶”ê°€
      const newBubbles = tab.bubbles.filter(bubble => !existingTab.bubbles.has(bubble.id));
      if (newBubbles.length > 0) {
        newContent.push(''); // ê¸°ì¡´ ë‚´ìš©ê³¼ ìƒˆ ë‚´ìš© ì‚¬ì´ êµ¬ë¶„ì„ ìœ„í•œ ë¹ˆ ì¤„
        const newBubblesContent = newBubbles
          .map(bubble => bubbleToMarkdown(bubble))
          .join('\n\n');
        newContent.push(newBubblesContent);
      }
    } else {
      // ìƒˆë¡œìš´ íƒ­ì¸ ê²½ìš°
      if (index > 0) {
        newContent.push('\n---\n');
      }
      newContent.push(tabToMarkdown(tab));
    }
  });

  await fs.writeFile(markdownPath, newContent.join('\n'));
}
```

ì£¼ìš” ë³€ê²½ì‚¬í•­:
1. ê¸°ì¡´ íƒ­ì˜ ê²½ìš°:
   - íƒ­ì˜ í—¤ë” ì •ë³´(ID, ì œëª©, ìƒíƒœ, ë§ˆì§€ë§‰ í™œë™)ë¥¼ ìƒˆë¡œ ìƒì„±
   - íŒŒì‹±ëœ ê¸°ì¡´ ë²„ë¸”ë“¤ì˜ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©
   - ìƒˆë¡œìš´ ë²„ë¸”ë“¤ë§Œ ì¶”ê°€ë¡œ ë§ˆí¬ë‹¤ìš´ ìƒì„±
2. ìƒˆë¡œìš´ íƒ­ì˜ ê²½ìš°:
   - `tabToMarkdown` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì²´ ë‚´ìš©ì„ ìƒˆë¡œ ìƒì„±
3. ê° íƒ­ ì‚¬ì´ì—ëŠ” êµ¬ë¶„ì„ (`---`) ì¶”ê°€
4. ë¬¸ì„œ ì‹œì‘ì€ í•­ìƒ "# Cursor Chats"ë¡œ í†µì¼

ì´ë ‡ê²Œ í•˜ë©´ ê¸°ì¡´ ë²„ë¸”ë“¤ì˜ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì„ ìœ ì§€í•˜ë©´ì„œ ìƒˆë¡œìš´ ë²„ë¸”ë“¤ë§Œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



<!-- Bubble ID: 88476fdc-e714-4fe9-88d4-8c6914972a70 -->
**ğŸ‘¤ User**

ì§€ê¸ˆê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ë“¤ì„ ì¢…í•©í•œ ì½”ë“œë¥¼ ì¤˜ í•œ ë²ˆì— ì ìš©í•˜ê²Œ



<!-- Bubble ID: a2270b16-eaa8-4716-ab2c-efa3c7787b5d -->
**ğŸ¤– AI (claude-3.5-sonnet)**

ë„¤, ì§€ê¸ˆê¹Œì§€ì˜ ëª¨ë“  ë³€ê²½ì‚¬í•­ì„ í¬í•¨í•œ ì „ì²´ ì½”ë“œë¥¼ ì œê³µí•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

```typescript:src/utils.ts
// ... existing imports ...

function formatDate(date: Date): string {
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, '0');
  const day = String(date.getDate()).padStart(2, '0');
  const hours = String(date.getHours()).padStart(2, '0');
  const minutes = String(date.getMinutes()).padStart(2, '0');
  
  return `${year}/${month}/${day} ${hours}:${minutes}`;
}

function bubbleToMarkdown(bubble: Bubble): string {
  const parts: string[] = [];
  parts.push(`<!-- Bubble ID: ${bubble.id} -->`);
  const author = bubble.type === 'user' ? 'ğŸ‘¤ User' : 'ğŸ¤– AI';
  parts.push(`**${author}**`);

  if (bubble.text) {
    parts.push(bubble.text);
  }

  if (bubble.selections.length > 0) {
    parts.push('<details><summary>ì„ íƒëœ í…ìŠ¤íŠ¸</summary>\n');
    bubble.selections.forEach(selection => {
      parts.push(selection.text);
    });
    parts.push('</details>');
  }

  if (bubble.fileSelections.length > 0) {
    parts.push('<details><summary>ì„ íƒëœ íŒŒì¼</summary>\n');
    bubble.fileSelections.forEach(file => {
      parts.push(file.uri.path);
    });
    parts.push('</details>');
  }

  if (bubble.folderSelections.length > 0) {
    parts.push('<details><summary>ì„ íƒëœ í´ë”</summary>\n');
    bubble.folderSelections.forEach(folder => {
      parts.push(folder.uri.path);
    });
    parts.push('</details>');
  }

  if (bubble.type === 'ai' && bubble.modelType) {
    parts.push(`**Model**: ${bubble.modelType}`);
  }

  return parts.join('\n');
}

function tabToMarkdown(tab: Tab, existingBubbles: Set<string> = new Set()): string {
  const parts: string[] = [];
  parts.push(`<!-- Tab ID: ${tab.tabId} -->`);
  
  const title = tab.chatTitle || 'Untitled Chat';
  parts.push(`## ${title}`);
  parts.push(`**ìƒíƒœ**: ${tab.tabState}`);
  if (tab.lastSendTime) {
    parts.push(`**ë§ˆì§€ë§‰ í™œë™**: ${formatDate(new Date(tab.lastSendTime))}\n`);
  }

  tab.bubbles.forEach(bubble => {
    if (!existingBubbles.has(bubble.id)) {
      parts.push(bubbleToMarkdown(bubble));
      parts.push(''); // ë²„ë¸” ì‚¬ì´ì— ë¹ˆ ì¤„ ì¶”ê°€
    }
  });

  return parts.join('\n');
}

function parseExistingMarkdown(content: string): ParsedContent {
  const tabs = new Map<string, TabContent>();
  let currentTabId: string | null = null;
  let currentTabContent: string[] = [];
  let currentBubbles = new Set<string>();
  let position = 0;

  const lines = content.split('\n');

  for (let i = 0; i < lines.length; i++) {
    const line = lines[i];
    position += line.length + 1; // +1 for newline

    const tabMatch = line.match(/^<!-- Tab ID: ([a-zA-Z0-9-]+) -->/);
    if (tabMatch) {
      if (currentTabId) {
        tabs.set(currentTabId, {
          content: currentTabContent.join('\n'),
          bubbles: currentBubbles,
          lastPosition: position
        });
      }
      currentTabId = tabMatch[1];
      currentTabContent = [line];
      currentBubbles = new Set<string>();
      continue;
    }

    const bubbleMatch = line.match(/^<!-- Bubble ID: ([a-zA-Z0-9-]+) -->/);
    if (bubbleMatch && currentTabId) {
      currentBubbles.add(bubbleMatch[1]);
    }

    if (currentTabId) {
      currentTabContent.push(line);
    }
  }

  if (currentTabId) {
    tabs.set(currentTabId, {
      content: currentTabContent.join('\n'),
      bubbles: currentBubbles,
      lastPosition: position
    });
  }

  return { tabs };
}

export async function updateCursorChatMarkdown(data: ChatData): Promise<void> {
  const workspaceFolders = vscode.workspace.workspaceFolders;
  if (!workspaceFolders) {
    throw new Error('ì‘ì—… ê³µê°„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
  }
  
  const markdownPath = path.join(workspaceFolders[0].uri.fsPath, 'cursor-chat.md');
  let existingContent = '';
  let parsedContent: ParsedContent = { tabs: new Map() };

  try {
    const fileExists = await fs.access(markdownPath)
      .then(() => true)
      .catch(() => false);

    if (fileExists) {
      existingContent = await fs.readFile(markdownPath, 'utf-8');
      parsedContent = parseExistingMarkdown(existingContent);
    }
  } catch (error) {
    existingContent = '# Cursor Chats\n\n';
  }

  const newContent: string[] = ['# Cursor Chats\n'];

  data.tabs.forEach((tab, index) => {
    const existingTab = parsedContent.tabs.get(tab.tabId);
    
    if (existingTab) {
      if (index > 0) {
        newContent.push('\n---\n');
      }
      
      newContent.push(`<!-- Tab ID: ${tab.tabId} -->`);
      newContent.push(`## ${tab.chatTitle || 'Untitled Chat'}`);
      newContent.push(`**ìƒíƒœ**: ${tab.tabState}`);
      if (tab.lastSendTime) {
        newContent.push(`**ë§ˆì§€ë§‰ í™œë™**: ${formatDate(new Date(tab.lastSendTime))}\n`);
      }

      const existingContent = existingTab.content.split('\n');
      const existingBubbleContent = existingContent
        .slice(existingContent.indexOf('<!-- Bubble ID:'))
        .join('\n');
      newContent.push(existingBubbleContent);

      const newBubbles = tab.bubbles.filter(bubble => !existingTab.bubbles.has(bubble.id));
      if (newBubbles.length > 0) {
        newContent.push('');
        const newBubblesContent = newBubbles
          .map(bubble => bubbleToMarkdown(bubble))
          .join('\n\n');
        newContent.push(newBubblesContent);
      }
    } else {
      if (index > 0) {
        newContent.push('\n---\n');
      }
      newContent.push(tabToMarkdown(tab));
    }
  });

  await fs.writeFile(markdownPath, newContent.join('\n'));
}

// ... existing functions (getCursorPath, initDatabase, getChatData, collectAndSaveChats) ...
```

ì£¼ìš” ë³€ê²½ì‚¬í•­ì„ ì •ë¦¬í•˜ë©´:
1. ë‚ ì§œ í˜•ì‹ì„ `YYYY/MM/DD HH:mm` í˜•ì‹ìœ¼ë¡œ ë³€ê²½
2. ë§ˆí¬ë‹¤ìš´ ì œëª©ì„ "Cursor Chats"ë¡œ í†µì¼
3. ë²„ë¸” ë‚´ìš©ì„ `<details>` íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ í† ê¸€ ê°€ëŠ¥í•˜ê²Œ ë³€ê²½
4. íƒ­ ì‚¬ì´ì—ë§Œ êµ¬ë¶„ì„ (`---`) ì‚¬ìš©
5. ê¸°ì¡´ íƒ­ì˜ ê²½ìš° ì´ì „ ë²„ë¸” ë‚´ìš©ì„ ìœ ì§€í•˜ê³  ìƒˆë¡œìš´ ë²„ë¸”ë§Œ ì¶”ê°€
6. ìƒˆë¡œìš´ íƒ­ì˜ ê²½ìš° ì „ì²´ ë‚´ìš©ì„ ìƒˆë¡œ ìƒì„±

ì´ì „ì— ìˆë˜ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ í•¨ìˆ˜ë“¤(getCursorPath, initDatabase, getChatData, collectAndSaveChats)ì€ ë³€ê²½ë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ì‹œë©´ ë©ë‹ˆë‹¤.



<!-- Bubble ID: 4d09da4a-6954-4ffe-b25b-23b0e5326a8d -->
**ğŸ‘¤ User**

@utils.ts bubbleì„ 2 space ì”© indent í•  ìˆ˜ ìˆì–´?

**Code / File / Folder**

<details><summary>Code /src/utils.ts (line 118)</summary>

```typescript
tab.bubbles.forEach(bubble => {
  if (!existingBubbles.has(bubble.id)) {
    parts.push(bubbleToMarkdown(bubble));
    parts.push(''); // ë²„ë¸” ì‚¬ì´ì— ë¹ˆ ì¤„ ì¶”ê°€
  }
});
```
</details>
File /src/utils.ts



<!-- Bubble ID: 4d67f494-282e-409f-a7f1-2f6c3a73dcfa -->
**ğŸ¤– AI (claude-3.5-sonnet)**



ë„¤, bubbleì˜ ë‚´ìš©ì„ 2ì¹¸ ë“¤ì—¬ì“°ê¸° í•˜ë„ë¡ `bubbleToMarkdown` í•¨ìˆ˜ë¥¼ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤.

```typescript:src/utils.ts
function bubbleToMarkdown(bubble: Bubble): string {
  const parts: string[] = [];
  parts.push(`<!-- Bubble ID: ${bubble.id} -->`);
  const author = bubble.type === 'user' ? 'ğŸ‘¤ User' : 'ğŸ¤– AI';
  parts.push(`  **${author}**\n`);

  if (bubble.text) {
    parts.push(`  ${bubble.text}\n`);
  }

  if (bubble.selections?.length || bubble.fileSelections?.length || bubble.folderSelections?.length) {
    parts.push(`  **ì½”ë“œ ì„ íƒ / íŒŒì¼ / í´ë”**\n`);

    bubble.selections?.forEach(selection => {
      parts.push(`  <details><summary>${removeProjectPath(selection.uri.path)} (${selection.range.selectionStartLineNumber}) Code</summary>\n`);
      // ì½”ë“œ ë‚´ìš©ì€ 4ì¹¸ ë“¤ì—¬ì“°ê¸° (details ì•ˆìª½ì´ë¯€ë¡œ)
      parts.push(`    ${selection.text}`);
      parts.push('  </details>');
    });

    bubble.fileSelections?.forEach(file => {
      parts.push(`  ${removeProjectPath(file.uri.path)} File\n`);
    });

    bubble.folderSelections?.forEach(folder => {
      parts.push(`  ${removeProjectPath(folder.uri.path)} Folder\n`);
    });
  }

  if (bubble.type === 'ai' && bubble.modelType) {
    parts.push(`  **Model**: ${bubble.modelType}\n`);
  }

  return parts.join('\n');
}
```

ê° bubbleì˜ ë‚´ìš©ì„ 2ì¹¸ì”© ë“¤ì—¬ì“°ê¸° í–ˆê³ , `<details>` íƒœê·¸ ì•ˆì˜ ì½”ë“œ ë‚´ìš©ì€ 4ì¹¸ ë“¤ì—¬ì“°ê¸°ë¥¼ ì ìš©í–ˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë§ˆí¬ë‹¤ìš´ì—ì„œ ê³„ì¸µ êµ¬ì¡°ê°€ ë” ëª…í™•í•˜ê²Œ ë³´ì¼ ê²ƒì…ë‹ˆë‹¤.



<!-- Bubble ID: f1079803-35f4-4592-9320-bb41de2c86bb -->
**ğŸ‘¤ User**

updateCursorChatMarkdown ì—ì„œ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” tabì— ì´ì „ bubbleë“¤ì´ ì‚¬ë¼ì ¸



<!-- Bubble ID: 9419d062-b546-45fb-8fb5-7488ad96047a -->
**ğŸ¤– AI (claude-3.5-sonnet)**



ë„¤, ë¬¸ì œë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤. `existingBubbleContent`ë¥¼ ì°¾ëŠ” ë¶€ë¶„ì˜ ë¡œì§ì´ ì˜ëª»ë˜ì–´ ìˆì—ˆë„¤ìš”. `updateCursorChatMarkdown` í•¨ìˆ˜ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤.

```typescript:src/utils.ts
export async function updateCursorChatMarkdown(data: ChatData): Promise<void> {
  const markdownPath = path.join(getProjectPath(), 'cursor-chat.md');

  let existingContent = '';
  let parsedContent: ParsedContent = { tabs: new Map() };

  try {
    const fileExists = await fs.access(markdownPath)
      .then(() => true)
      .catch(() => false);

    if (fileExists) {
      existingContent = await fs.readFile(markdownPath, 'utf-8');
      parsedContent = parseExistingMarkdown(existingContent);
    }
  } catch (error) {
    existingContent = '# Cursor Chats\n\n';
  }

  const newContent: string[] = ['# Cursor Chats\n'];

  data.tabs.forEach((tab, index) => {
    const existingTab = parsedContent.tabs.get(tab.tabId);

    if (existingTab) {
      if (index > 0) {
        newContent.push('\n---\n');
      }

      // íƒ­ í—¤ë” ì •ë³´ ì—…ë°ì´íŠ¸
      newContent.push(`<!-- Tab ID: ${tab.tabId} -->`);
      newContent.push(`## ${tab.chatTitle || 'Untitled Chat'}`);
      if (tab.lastSendTime) {
        newContent.push(`**ë§ˆì§€ë§‰ í™œë™**: ${formatDate(new Date(tab.lastSendTime))}\n`);
      }

      // ê¸°ì¡´ ë²„ë¸”ë“¤ì˜ ë‚´ìš©ì„ ìœ ì§€
      const existingLines = existingTab.content.split('\n');
      const bubbleStartIndex = existingLines.findIndex(line => line.includes('<!-- Bubble ID:'));
      if (bubbleStartIndex !== -1) {
        const existingBubbles = existingLines.slice(bubbleStartIndex).join('\n');
        newContent.push(existingBubbles);
      }

      // ìƒˆë¡œìš´ ë²„ë¸”ë“¤ë§Œ ì¶”ê°€
      const newBubbles = tab.bubbles.filter(bubble => !existingTab.bubbles.has(bubble.id));
      if (newBubbles.length > 0) {
        newContent.push('');  // ê¸°ì¡´ ë²„ë¸”ê³¼ ìƒˆ ë²„ë¸” ì‚¬ì´ êµ¬ë¶„ì„ ìœ„í•œ ë¹ˆ ì¤„
        newBubbles.forEach(bubble => {
          newContent.push(bubbleToMarkdown(bubble));
          newContent.push('');  // ë²„ë¸” ì‚¬ì´ êµ¬ë¶„ì„ ìœ„í•œ ë¹ˆ ì¤„
        });
      }
    } else {
      // ìƒˆë¡œìš´ íƒ­ì¸ ê²½ìš°
      if (index > 0) {
        newContent.push('\n---\n');
      }
      newContent.push(tabToMarkdown(tab));
    }
  });

  await fs.writeFile(markdownPath, newContent.join('\n'));
}
```

ì£¼ìš” ë³€ê²½ì‚¬í•­:
1. ê¸°ì¡´ ë²„ë¸” ë‚´ìš©ì„ ì°¾ì„ ë•Œ `<!-- Bubble ID:` ë§ˆì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •í™•í•œ ì‹œì‘ ì§€ì ì„ ì°¾ë„ë¡ ìˆ˜ì •
2. ê¸°ì¡´ ë²„ë¸” ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ê³ , ìƒˆë¡œìš´ ë²„ë¸”ë§Œ ì¶”ê°€í•˜ëŠ” ë¡œì§ì„ ëª…í™•í•˜ê²Œ ë¶„ë¦¬
3. ë²„ë¸” ì‚¬ì´ì— ë¹ˆ ì¤„ì„ ì¶”ê°€í•˜ì—¬ ê°€ë…ì„± ê°œì„ 

ì´ì œ ê¸°ì¡´ íƒ­ì˜ ë²„ë¸”ë“¤ì´ ìœ ì§€ë˜ë©´ì„œ ìƒˆë¡œìš´ ë²„ë¸”ë“¤ë§Œ ì¶”ê°€ë  ê²ƒì…ë‹ˆë‹¤.



<!-- Bubble ID: 48e550d3-1a73-4711-9a63-32394b67d3bf -->
**ğŸ‘¤ User**



<!-- Bubble ID: 436a1326-19d8-4369-b849-a1ede61a0749 -->
**ğŸ¤– AI (claude-3.5-sonnet)**



VSCode ìµìŠ¤í…ì…˜ì˜ `package.json`ì— `activationEvents`ê°€ í•„ìš”í•˜ë‹¤ëŠ” ì—ëŸ¬ë„¤ìš”. ìµìŠ¤í…ì…˜ì´ ì–¸ì œ í™œì„±í™”ë ì§€ ì§€ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

```json:package.json
{
  // ... ê¸°ì¡´ ì„¤ì •ë“¤ ...
  "activationEvents": [
    "onCommand:cursor-chat-history.saveChatHistory"
  ],
  "contributes": {
    "commands": [
      {
        "command": "cursor-chat-history.saveChatHistory",
        "title": "Save Cursor Chat History"
      }
    ]
  }
  // ... ê¸°ì¡´ ì„¤ì •ë“¤ ...
}
```

ì´ë ‡ê²Œ ì„¤ì •í•˜ë©´:
1. `onCommand`: íŠ¹ì • ëª…ë ¹ì–´ê°€ ì‹¤í–‰ë  ë•Œ ìµìŠ¤í…ì…˜ì´ í™œì„±í™”ë©ë‹ˆë‹¤.
2. `cursor-chat-history.saveChatHistory`: ì‹¤ì œ ëª…ë ¹ì–´ IDì…ë‹ˆë‹¤.
3. `contributes.commands`: VSCodeì— ìƒˆë¡œìš´ ëª…ë ¹ì–´ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.

ë˜ëŠ” VSCode ì‹œì‘ì‹œ ë°”ë¡œ í™œì„±í™”í•˜ê³  ì‹¶ë‹¤ë©´:

```json:package.json
{
  // ... ê¸°ì¡´ ì„¤ì •ë“¤ ...
  "activationEvents": ["*"],
  // ... ê¸°ì¡´ ì„¤ì •ë“¤ ...
}
```

`"*"`ëŠ” VSCodeê°€ ì‹œì‘ë  ë•Œ ë°”ë¡œ ìµìŠ¤í…ì…˜ì„ í™œì„±í™”í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.



<!-- Bubble ID: fc8aba99-6291-49a7-a245-eba2475bd271 -->
**ğŸ‘¤ User**



<!-- Bubble ID: 003d0519-4cd1-4584-870d-7a17285f1ab5 -->
**ğŸ¤– AI (claude-3.5-sonnet)**



ì˜ì¡´ì„± ë¬¸ì œê°€ ë§ì´ ë°œìƒí–ˆë„¤ìš”. íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ pnpmì—ì„œ npmìœ¼ë¡œ ë³€ê²½í•˜ê³ , í•„ìˆ˜ ì˜ì¡´ì„±ë§Œ ì„¤ì¹˜í•˜ë„ë¡ package.jsonì„ ìˆ˜ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.

```json:package.json
{
  "name": "cursor-chat-keeper",
  "displayName": "Cursor Chat Keeper",
  "description": "Save Cursor chat history as markdown",
  "version": "0.0.1",
  "engines": {
    "vscode": "^1.86.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onCommand:cursor-chat-history.saveChatHistory"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "cursor-chat-history.saveChatHistory",
        "title": "Save Cursor Chat History"
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "pretest": "npm run compile && npm run lint",
    "lint": "eslint src --ext ts",
    "test": "vscode-test"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.6",
    "@types/node": "18.x",
    "@types/vscode": "^1.86.0",
    "@typescript-eslint/eslint-plugin": "^6.19.1",
    "@typescript-eslint/parser": "^6.19.1",
    "@vscode/test-cli": "^0.0.4",
    "@vscode/test-electron": "^2.3.9",
    "eslint": "^8.56.0",
    "typescript": "^5.3.3"
  },
  "dependencies": {
    "@vscode/sqlite3": "^5.1.1-vscode"
  }
}
```

ê·¸ë¦¬ê³  ë‹¤ìŒ ëª…ë ¹ì–´ë“¤ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•´ë³´ì„¸ìš”:

```bash
# ê¸°ì¡´ node_modulesì™€ package-lock.json ì‚­ì œ
rm -rf node_modules package-lock.json

# npmìœ¼ë¡œ ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# VSCode ìµìŠ¤í…ì…˜ ë¹Œë“œ
npm run compile
```

ì´ë ‡ê²Œ í•˜ë©´ í•„ìˆ˜ ì˜ì¡´ì„±ë§Œ ì„¤ì¹˜ë˜ì–´ ë¬¸ì œê°€ í•´ê²°ë  ê²ƒì…ë‹ˆë‹¤. ìœ„ package.jsonì€ VSCode ìµìŠ¤í…ì…˜ ê°œë°œì— í•„ìš”í•œ ìµœì†Œí•œì˜ ì˜ì¡´ì„±ë§Œ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.



<!-- Bubble ID: b0624dfd-663f-4cc8-93e6-62009166f1fe -->
**ğŸ‘¤ User**



<!-- Bubble ID: 72fd6b96-06e9-4a9b-ad0a-532a189c6e26 -->
**ğŸ¤– AI (claude-3.5-sonnet)**



package.jsonì— repository í•„ë“œë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.

```json:package.json
{
  "name": "cursor-chat-keeper",
  "displayName": "Cursor Chat Keeper",
  "description": "Save Cursor chat history as markdown",
  "version": "0.0.1",
  "repository": {
    "type": "git",
    "url": "https://github.com/your-username/cursor-chat-keeper.git"
  },
  "engines": {
    "vscode": "^1.86.0"
  },
  // ... ë‚˜ë¨¸ì§€ ì„¤ì •ë“¤ì€ ë™ì¼ ...
}
```

ë§Œì•½ ì•„ì§ GitHub ì €ì¥ì†Œë¥¼ ë§Œë“¤ì§€ ì•Šì•˜ë‹¤ë©´, ê°„ë‹¨íˆ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

```json:package.json
{
  // ... ë‹¤ë¥¸ ì„¤ì •ë“¤ ...
  "repository": {
    "type": "git",
    "url": "https://github.com/username/cursor-chat-keeper"
  },
  // ... ë‚˜ë¨¸ì§€ ì„¤ì •ë“¤ ...
}
```

ë˜ëŠ” ë” ê°„ë‹¨í•˜ê²Œ:

```json:package.json
{
  // ... ë‹¤ë¥¸ ì„¤ì •ë“¤ ...
  "repository": "github:username/cursor-chat-keeper",
  // ... ë‚˜ë¨¸ì§€ ì„¤ì •ë“¤ ...
}
```

ì´ëŠ” ê²½ê³  ë©”ì‹œì§€ì¼ ë¿ì´ë¯€ë¡œ, repository í•„ë“œê°€ ì—†ì–´ë„ ìµìŠ¤í…ì…˜ ì‘ë™ì—ëŠ” ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.



<!-- Bubble ID: 8df3c3c6-3ca2-4a8b-8bec-b8c15fb2c136 -->
**ğŸ‘¤ User**

 WARNING  LICENSE.md, LICENSE.txt or LICENSE not found



<!-- Bubble ID: 82e379b1-9198-4017-97c3-d14b3d3d3e2b -->
**ğŸ¤– AI (claude-3.5-sonnet)**



í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— LICENSE íŒŒì¼ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”. ì¼ë°˜ì ìœ¼ë¡œ MIT ë¼ì´ì„ ìŠ¤ë¥¼ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.

```text:LICENSE
MIT License

Copyright (c) 2024 [Your Name]

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

ê·¸ë¦¬ê³  package.jsonì—ë„ license í•„ë“œë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”:

```json:package.json
{
  // ... ë‹¤ë¥¸ ì„¤ì •ë“¤ ...
  "license": "MIT",
  // ... ë‚˜ë¨¸ì§€ ì„¤ì •ë“¤ ...
}
```



<!-- Bubble ID: 117b480b-454b-456c-8223-feb7ec3d7699 -->
**ğŸ‘¤ User**

@vsc-extension-quickstart.md ë‚´ê°€ ê°œë°œí•œ extensionì— ë§ê²Œ ì´ íŒŒì¼ì„ ë³€ê²½í•´ì¤˜

**Code / File / Folder**

File /vsc-extension-quickstart.md



<!-- Bubble ID: 9196b3bc-d4f3-44a3-a4f4-1e5ba30ada46 -->
**ğŸ¤– AI (claude-3.5-sonnet)**





```markdown:vsc-extension-quickstart.md
# Cursor Chat Keeper Extension Guide

## What's in the folder

* This folder contains all of the files necessary for your extension.
* `package.json` - this is the manifest file in which you declare your extension and command.
  * The extension registers a command `cursor-chat-history.saveChatHistory` that saves Cursor chat history as markdown.
* `src/extension.ts` - this is the main file where you will provide the implementation of your command.
  * The file exports one function, `activate`, which is called the very first time your extension is activated.
  * Inside the `activate` function we register the command to save chat history.
* `src/utils.ts` - contains utility functions for:
  * Reading Cursor's SQLite database
  * Parsing chat data
  * Converting chat data to markdown format
* `src/types.ts` - contains TypeScript interfaces for chat data structure

## Setup

* Install the recommended extensions (amodio.tsl-problem-matcher, ms-vscode.extension-test-runner, and dbaeumer.vscode-eslint)
* Run `npm install` to install dependencies

## Get up and running straight away

* Press `F5` to open a new window with your extension loaded.
* Run the command from the command palette by pressing (`Ctrl+Shift+P` or `Cmd+Shift+P` on Mac) and typing `Save Cursor Chat History`.
* The extension will create/update a `cursor-chat.md` file in your workspace root with your Cursor chat history.
* Set breakpoints in your code inside `src/extension.ts` or `src/utils.ts` to debug your extension.
* Find output from your extension in the debug console.

## Make changes

* You can relaunch the extension from the debug toolbar after changing code in the source files.
* You can also reload (`Ctrl+R` or `Cmd+R` on Mac) the VS Code window with your extension to load your changes.

## Features

* Reads chat history from Cursor's SQLite database
* Converts chat data to readable markdown format
* Maintains chat history with updates
* Preserves code selections and file references
* Organizes chats by tabs with timestamps

## Run tests

* Install the [Extension Test Runner](https://marketplace.visualstudio.com/items?itemName=ms-vscode.extension-test-runner)
* Run the "watch" task via the **Tasks: Run Task** command.
* Open the Testing view from the activity bar and click the Run Test" button, or use the hotkey `Ctrl/Cmd + ; A`
* See the output of the test result in the Test Results view.
* Make changes to test files inside the `test` folder.

## Go further

* [Publish your extension](https://code.visualstudio.com/api/working-with-extensions/publishing-extension) on the VS Code extension marketplace.
* Add more features like:
  * Custom markdown formatting options
  * Auto-save functionality
  * Chat history search capabilities
  * Export to different formats
```

ì£¼ìš” ë³€ê²½ì‚¬í•­:
1. ì œëª©ê³¼ ì†Œê°œë¥¼ Cursor Chat Keeperì— ë§ê²Œ ìˆ˜ì •
2. í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ëª… ì—…ë°ì´íŠ¸
3. ì‹¤ì œ ëª…ë ¹ì–´ì™€ ê¸°ëŠ¥ ì„¤ëª… ì¶”ê°€
4. íŠ¹ì§•(Features) ì„¹ì…˜ ì¶”ê°€
5. í–¥í›„ ê°œë°œ ê°€ëŠ¥í•œ ê¸°ëŠ¥ ì œì•ˆ ì¶”ê°€



<!-- Bubble ID: 1c9092b1-6d73-4eef-8d85-194bbeddbdd4 -->
**ğŸ‘¤ User**

@README.md extensionì„ ì„¤ì¹˜í•´ì„œ ì‚¬ìš©í•˜ë ¤ëŠ” ì‚¬ëŒë“¤ì„ ìœ„í•´ì„œ README.md íŒŒì¼ì„ ìˆ˜ì •í•´ì¤˜. ë‹¨ì¶•í‚¤ì™€ ëª…ë ¹ì–´ë¥¼ í¬í•¨í•´ì•¼ í•´

**Code / File / Folder**

File /README.md



<!-- Bubble ID: 6394bf71-f4cf-4092-947b-9d7669d423ba -->
**ğŸ¤– AI (claude-3.5-sonnet)**





```markdown:README.md
# Cursor Chat Keeper

VSCode extension that saves your Cursor chat history as a markdown file. This extension helps you keep track of your AI conversations in Cursor editor by automatically formatting and organizing them into a readable markdown document.

## Features

- ğŸ’¾ Saves Cursor chat history to a markdown file (`cursor-chat.md`)
- ğŸ“ Maintains chat history with updates
- ğŸ” Preserves code selections and file references
- ğŸ“… Organizes chats by tabs with timestamps
- ğŸ¨ Clean markdown formatting for better readability

## Requirements

- VSCode 1.86.0 or higher
- Cursor Editor installed
- Active workspace (folder) opened in VSCode

## Installation

1. Open VSCode
2. Go to Extensions (Ctrl+Shift+X or Cmd+Shift+X on Mac)
3. Search for "Cursor Chat Keeper"
4. Click Install

## Usage

### Command Palette

1. Open Command Palette (Ctrl+Shift+P or Cmd+Shift+P on Mac)
2. Type "Save Cursor Chat History"
3. Press Enter

The extension will create (or update) a `cursor-chat.md` file in your workspace root directory.

### Output Format

The markdown file will be organized as follows:

```markdown
# Cursor Chats

## Chat Title
**ë§ˆì§€ë§‰ í™œë™**: YYYY/MM/DD HH:mm

ğŸ‘¤ User
  Your message here...

ğŸ¤– AI
  AI response here...
  
  <details><summary>ì„ íƒëœ ì½”ë“œ</summary>
    Code selection here...
  </details>
```

## Known Issues

- The extension requires an active workspace to save the markdown file
- Currently only supports one workspace at a time

## Release Notes

### 0.0.1

Initial release of Cursor Chat Keeper

## Contributing

Feel free to submit issues and enhancement requests on our [GitHub repository](https://github.com/username/cursor-chat-keeper).

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
```


ì´ READMEëŠ”:
1. ìµìŠ¤í…ì…˜ì˜ ì£¼ìš” ê¸°ëŠ¥ ì„¤ëª…
2. ì„¤ì¹˜ ìš”êµ¬ì‚¬í•­
3. ì„¤ì¹˜ ë°©ë²•
4. ì‚¬ìš© ë°©ë²•ê³¼ ë‹¨ì¶•í‚¤
5. ì¶œë ¥ í˜•ì‹ ì˜ˆì‹œ
6. ì•Œë ¤ì§„ ì´ìŠˆ
7. ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸
8. ê¸°ì—¬ ë°©ë²•
9. ë¼ì´ì„ ìŠ¤ ì •ë³´

ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. GitHub ì €ì¥ì†Œ URLì€ ì‹¤ì œ URLë¡œ ìˆ˜ì •í•´ì£¼ì„¸ìš”.



<!-- Bubble ID: 84b6a192-4a6a-4ecd-af2e-35e01bf47c48 -->
**ğŸ‘¤ User**

ë‹¨ì¶•í‚¤ê°€ ë¹ ì ¸ì‡ì–´



<!-- Bubble ID: 418e3614-73f5-4221-a2a2-98165e49a012 -->
**ğŸ¤– AI (claude-3.5-sonnet)**





ë„¤, ë‹¨ì¶•í‚¤ ì„¹ì…˜ì„ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤.

```markdown:README.md
# Cursor Chat Keeper

VSCode extension that saves your Cursor chat history as a markdown file. This extension helps you keep track of your AI conversations in Cursor editor by automatically formatting and organizing them into a readable markdown document.

## Features

- ğŸ’¾ Saves Cursor chat history to a markdown file (`cursor-chat.md`)
- ğŸ“ Maintains chat history with updates
- ğŸ” Preserves code selections and file references
- ğŸ“… Organizes chats by tabs with timestamps
- ğŸ¨ Clean markdown formatting for better readability

## Requirements

- VSCode 1.86.0 or higher
- Cursor Editor installed
- Active workspace (folder) opened in VSCode

## Installation

1. Open VSCode
2. Go to Extensions (Ctrl+Shift+X or Cmd+Shift+X on Mac)
3. Search for "Cursor Chat Keeper"
4. Click Install

## Usage

### Keyboard Shortcuts

Default keyboard shortcuts:
- Windows/Linux: `Ctrl+Alt+S`
- macOS: `Cmd+Alt+S`

You can customize these shortcuts in VSCode:
1. Open Command Palette (`Ctrl+Shift+P` or `Cmd+Shift+P` on Mac)
2. Type "Preferences: Open Keyboard Shortcuts"
3. Search for "Save Cursor Chat History"
4. Click the plus icon to add or modify the shortcut

### Command Palette

1. Open Command Palette (`Ctrl+Shift+P` or `Cmd+Shift+P` on Mac)
2. Type "Save Cursor Chat History"
3. Press Enter

The extension will create (or update) a `cursor-chat.md` file in your workspace root directory.

// ... (ë‚˜ë¨¸ì§€ ë‚´ìš©ì€ ë™ì¼)
```


ê·¸ë¦¬ê³  `package.json`ì—ë„ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì„¤ì •ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤:

```json:package.json
{
  // ... ë‹¤ë¥¸ ì„¤ì •ë“¤ ...
  "contributes": {
    "commands": [{
      "command": "cursor-chat-history.saveChatHistory",
      "title": "Save Cursor Chat History"
    }],
    "keybindings": [{
      "command": "cursor-chat-history.saveChatHistory",
      "key": "ctrl+alt+s",
      "mac": "cmd+alt+s",
      "when": "editorTextFocus"
    }]
  },
  // ... ë‚˜ë¨¸ì§€ ì„¤ì •ë“¤ ...
}
```

ì´ë ‡ê²Œ í•˜ë©´ ê¸°ë³¸ ë‹¨ì¶•í‚¤ê°€ ì„¤ì •ë˜ê³  ì‚¬ìš©ìê°€ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



<!-- Bubble ID: 1b2e718b-9d9b-4499-bb2e-d92233dd4593 -->
**ğŸ‘¤ User**

@package.json ì´ë¯¸ ìˆì–ì•„

**Code / File / Folder**

File /package.json



<!-- Bubble ID: 5d84ad39-6186-4385-a5b4-87f6dd95a500 -->
**ğŸ¤– AI (claude-3.5-sonnet)**





ë„¤, ì£„ì†¡í•©ë‹ˆë‹¤. ê¸°ì¡´ package.jsonì˜ keybindings ì„¤ì •ì„ macOSìš© ë‹¨ì¶•í‚¤ë„ í¬í•¨í•˜ë„ë¡ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤:

```json:package.json
{
  // ... ë‹¤ë¥¸ ì„¤ì •ë“¤ ...
  "contributes": {
    "commands": [
      {
        "command": "cursor-chat-keeper.collectChats",
        "title": "Collect Chats from Cursor"
      }
    ],
    "keybindings": [
      {
        "command": "cursor-chat-keeper.collectChats",
        "key": "ctrl+alt+c",
        "mac": "cmd+alt+c",
        "when": "editorTextFocus"
      }
    ]
  },
  // ... ë‚˜ë¨¸ì§€ ì„¤ì •ë“¤ ...
}
```


ê·¸ë¦¬ê³  README.mdì˜ ë‹¨ì¶•í‚¤ ì„¹ì…˜ë„ ì‹¤ì œ ì„¤ì •ëœ ë‹¨ì¶•í‚¤ë¡œ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤:

```markdown:README.md
### Keyboard Shortcuts

Default keyboard shortcuts:
- Windows/Linux: `Ctrl+Alt+C`
- macOS: `Cmd+Alt+C`

You can customize these shortcuts in VSCode:
1. Open Command Palette (`Ctrl+Shift+P` or `Cmd+Shift+P` on Mac)
2. Type "Preferences: Open Keyboard Shortcuts"
3. Search for "Collect Chats from Cursor"
4. Click the plus icon to add or modify the shortcut
```


ì´ì œ READMEì™€ package.jsonì˜ ë‹¨ì¶•í‚¤ ì„¤ì •ì´ ì¼ì¹˜í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.



<!-- Bubble ID: 53b7d645-c1c6-4cca-ada9-9f1f1c847216 -->
**ğŸ‘¤ User**

mac ë„ ëŒì¼í•˜ê²Œ ì“¸ê±°ì•¼



<!-- Bubble ID: 7fcf4bae-1042-4d80-9fc2-1e4f6ca071d6 -->
**ğŸ¤– AI (claude-3.5-sonnet)**







ë„¤, ëª¨ë“  OSì—ì„œ ë™ì¼í•œ ë‹¨ì¶•í‚¤ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

```json:package.json
{
  // ... ë‹¤ë¥¸ ì„¤ì •ë“¤ ...
  "contributes": {
    "commands": [
      {
        "command": "cursor-chat-keeper.collectChats",
        "title": "Collect Chats from Cursor"
      }
    ],
    "keybindings": [
      {
        "command": "cursor-chat-keeper.collectChats",
        "key": "ctrl+alt+c",
        "when": "editorTextFocus"
      }
    ]
  },
  // ... ë‚˜ë¨¸ì§€ ì„¤ì •ë“¤ ...
}
```



ê·¸ë¦¬ê³  README.mdì˜ ë‹¨ì¶•í‚¤ ì„¹ì…˜ë„ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤:

```markdown:README.md
### Keyboard Shortcuts

Default keyboard shortcut: `Ctrl+Alt+C`

You can customize this shortcut in VSCode:
1. Open Command Palette (`Ctrl+Shift+P` or `Cmd+Shift+P` on Mac)
2. Type "Preferences: Open Keyboard Shortcuts"
3. Search for "Collect Chats from Cursor"
4. Click the plus icon to add or modify the shortcut
```



ì´ì œ Windows, Linux, macOS ëª¨ë‘ ë™ì¼í•˜ê²Œ `Ctrl+Alt+C` ë‹¨ì¶•í‚¤ë¥¼ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.



<!-- Bubble ID: fbad7e02-cdec-4e0d-b8c1-4762e09ad92a -->
**ğŸ‘¤ User**

@README.md utils ë‚´ì— ì„ íƒí•œ ì½”ë“œë¥¼ ë°”íƒ•ìœ¼ë¡œ READMDì— ê° OSë³„ Cursor ìœ„ì¹˜ì— ëŒ€í•œ ì•ˆë‚´ë¥¼ ì¶”ê°€í•´ì¤˜

**Code / File / Folder**

<details><summary>Code /src/utils.ts (line 10)</summary>

```typescript
case "darwin":
  return path.join(os.homedir(), "Library", "Application Support", "Cursor");
case "win32":
  return path.join(os.homedir(), "%APPDATA%", "Roaming", "Cursor");
case "linux":
  return path.join(os.homedir(), ".config", "Cursor");
```
</details>
File /README.md



<!-- Bubble ID: 7233aa0c-7d9f-4b61-be64-9cec2d52a7d4 -->
**ğŸ¤– AI (claude-3.5-sonnet)**





ë„¤, README.mdì— Cursor ë°ì´í„°ë² ì´ìŠ¤ ìœ„ì¹˜ì— ëŒ€í•œ ì •ë³´ë¥¼ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤:

```markdown:README.md
# Cursor Chat Keeper

// ... (ê¸°ì¡´ ë‚´ìš©) ...

## Requirements

- VSCode 1.86.0 or higher
- Cursor Editor installed
- Active workspace (folder) opened in VSCode

### Cursor Database Location

The extension reads chat history from Cursor's database file, which is located at:

- Windows: `%APPDATA%\Roaming\Cursor`
- macOS: `~/Library/Application Support/Cursor`
- Linux: `~/.config/Cursor`

Make sure you have Cursor installed and have used the chat feature at least once before using this extension.

## Installation

// ... (ë‚˜ë¨¸ì§€ ë‚´ìš©ì€ ë™ì¼) ...
```


Requirements ì„¹ì…˜ ì•„ë˜ì— Cursor ë°ì´í„°ë² ì´ìŠ¤ ìœ„ì¹˜ ì •ë³´ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‚¬ìš©ìë“¤ì´ ìì‹ ì˜ ì‹œìŠ¤í…œì—ì„œ Cursor ë°ì´í„°ê°€ ì–´ë””ì— ì €ì¥ë˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.



<!-- Bubble ID: 7b475a16-c0ef-49ff-a96c-03a9cc21142f -->
**ğŸ‘¤ User**


